#include <stdio.h>
#include <string.h>

char * encrypt_decrypt(char *post_xor, char *pre_xor, char *xor_val){

	int i;
	size_t keylen = strlen(xor_val);
	for (i=0; i<strlen(pre_xor); i++){
		char temp = pre_xor[i] ^ xor_val[i % keylen];
		post_xor[i] = temp;
	}
	return post_xor;
}

void reveal_secret()
{
	char xor_string[] = "'42ftf) f5#%4#2f/5|f'45";
	char result[] = "'42ftf) f5#%4#2f/5|f'45";
	char xor_val[] = "F";
    printf("Part 1 of secret is: Electric\n");
	encrypt_decrypt(result, xor_string,xor_val);
	printf("%s\n",result);
}

int check_password(char *user_input)
{
	char xor_string[] =  ",81 226.3%psrut";
	char result[] = ",81 226.3%psrut";
	char xor_val[] = "A";
	encrypt_decrypt(result, xor_string,xor_val);
	return strcmp(user_input,result);

}

int main()
{
    char user_input[40];
    printf("What is the password?\n");
	gets(user_input);
	if (check_password(user_input) == 0){
		reveal_secret();
	}
	else{
	    printf("%Incorrect!\n");
	}
}
